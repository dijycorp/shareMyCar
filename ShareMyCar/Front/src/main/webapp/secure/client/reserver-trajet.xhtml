<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
	<title>Proposer un trajet</title>
</h:head>
<h:body>
	<ui:decorate template="#{templatesNavigationBean.basicTemplate}">

		<ui:define name="content">

			<h:form>
				<p:wizard flowListener="#{reservationBean.onFlowProcess}">

					<p:tab id="trajet" title="(1) Trajet">
						<p:panel header="Détails du trajet à réserver">
							<!-- affiche les informations sur le trajet -->
							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="Prix du trajet : " />
								<h:outputText value="#{trajetBean.trajet.prix} CFA" />

								<p:separator />
								<p:separator />

								<h:outputText value="Place(s) souhaité(s) : " />
								<h:inputText value="#{reservationBean.placeSouhaiter}"
									converter="javax.faces.Integer" required="true"
									requiredMessage="Il faut choisir le nombre de place" />

								<p:separator />
								<p:separator />

								<h:outputText value="Mode d'acceptation :" />
								<p:selectBooleanButton offLabel="Manuel" onLabel="Automatique"
									disabled="true" value="#{trajetBean.trajet.autoSoumission}" />

								<p:separator />
								<p:separator />

								<h:outputText value="Départ de : " />
								<h:outputText value="#{trajetBean.trajet.villeDepart.nomVille}" />

								<h:outputText value="Arrivé à : " />
								<h:outputText value="#{trajetBean.trajet.villeArrive.nomVille}" />

								<h:outputText value="Jour du départ : " />
								<h:outputText value="#{trajetBean.trajet.dateDepart}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

								<h:outputText value="Heure du départ : " />
								<h:outputText value="#{trajetBean.trajet.dateDepart}">
									<f:convertDateTime pattern="HH:mm" />
								</h:outputText>

								<h:outputText value="Avec comme chauffeur : " />
								<h:outputText value="#{trajetBean.trajet.chauffeur.login}" />

								<h:outputText value="La voiture sera : " />
								<h:outputText value="#{trajetBean.trajet.voiture.modele}" />

								<h:outputText value="Informations Complémentaires : " />
								<h:outputText value="#{trajetBean.trajet.infoComplementaire}" />

							</h:panelGrid>
						</p:panel>
					</p:tab>

					<p:tab id="Personnal" title="(2) Informations personnelles">
						<p:panel header="Valider les informations personnelles">
							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="Nom *" />
								<p:inputText value="#{userConnexionBean.user.nom}"
									required="true" label="Vérification du nom" />

								<h:outputText value="Prénom *" />
								<p:inputText value="#{userConnexionBean.user.prenom}"
									required="true" label="Vérification du prénom" />

								<h:outputText value="Email *" />
								<p:inputText value="#{userConnexionBean.user.email}"
									required="true" label="Vérification de l'email" />
							</h:panelGrid>
						</p:panel>
					</p:tab>


					<p:tab id="confirm" title="(3) Confirmation">
						<p:panel header="Confirmation">
							<!-- affiche les informations sur le trajet -->
							<h:panelGrid id="confirmation" columns="2"
								columnClasses="label, value">
								<h:outputText value="Prix du trajet : " />
								<h:outputText value="#{trajetBean.trajet.prix}" />

								<p:separator />
								<p:separator />

								<h:outputText value="Départ de : " />
								<h:outputText value="#{trajetBean.trajet.villeDepart.nomVille}" />

								<h:outputText value="Arrivé à : " />
								<h:outputText value="#{trajetBean.trajet.villeArrive.nomVille}" />

								<h:outputText value="Jour du départ : " />
								<h:outputText value="#{trajetBean.trajet.dateDepart}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

								<h:outputText value="Heure du départ : " />
								<h:outputText value="#{trajetBean.trajet.dateDepart}">
									<f:convertDateTime pattern="HH:mm" />
								</h:outputText>

								<h:outputText value="Avec comme chauffeur : " />
								<h:outputText value="#{trajetBean.trajet.chauffeur.login}" />

								<h:outputText value="La voiture sera : " />
								<h:outputText value="#{trajetBean.trajet.voiture.modele}" />

								<h:outputText value="Informations Complémentaires : " />
								<h:outputText value="#{trajetBean.trajet.infoComplementaire}" />

								<p:separator />
								<h:column />

								<h:outputText value="Nom :" />
								<h:outputText value="#{userConnexionBean.user.nom}"
									label="Vérification du nom" />

								<h:outputText value="Prénom :" />
								<h:outputText value="#{userConnexionBean.user.prenom}"
									label="Vérification du prénom" />

								<h:outputText value="Email :" />
								<h:outputText value="#{userConnexionBean.user.email}"
									label="Vérification de l'email" />

							</h:panelGrid>

						</p:panel>
						<p:commandButton value="confirmer votre réservation"
							action="#{reservationBean.effectuerReservation(trajetBean.trajet)}" />
					</p:tab>

				</p:wizard>


			</h:form>
		</ui:define>


	</ui:decorate>

</h:body>
</html>

